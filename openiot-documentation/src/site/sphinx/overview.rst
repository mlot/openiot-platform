===========================
 OpenIoT System Overview
===========================

This guide is intended to provide a high-level understanding of what OpenIoT does and how it
is implemented.

------------------
What is OpenIoT?
------------------
OpenIoT is an open source M2M integration platform -- a system that choreographs data coming from
and going to a web of connected devices. It provides the following functionality:

- Supplies a server based on proven technologies that acts as a controller for the processing of 
  device data. The server can be installed on a local machine or run in the cloud and is built on
  technologies that are designed to scale to billions of processed device events per day.
- Provides long-term persistence of data sent from devices. Historical device event data is valuable
  and OpenIoT offers a platform where data is never deleted, no matter the volume of events.
- Offers service provider interfaces (SPIs) that provide a core object model for the platform and
  allow third parties to extend and customize the system to work with new technologies.
- Delivers an advanced device provisioning system that allows control of the full lifecycle of 
  registering devices, sending commands based on hardware type, receiving data responses and 
  aggregating them. The system is based on a core set of interfaces that allow new communications 
  protocols and encoding schemes to be added and configured easily.
- Provides a model for standard types of data generated by devices. For instance, location data is stored
  such that it can be geospatially indexed and accessed by queries like 'which device events happened near
  this given location in the given time span'. Device measurement data is stored such that it can be
  analyzed, faceted, and graphed. Alerts for exceptional conditions can be captured and indexed so that
  an audit trail is available after the fact.
- Associates devices with external assets such as people or physical items. For instance, a badge may
  be associated with the person wearing it. A tracking device can be associated with the piece of heavy 
  equipment it is attached to. The asset information is offered via an asset management framework that 
  allows external systems to drive the information. For instance, the list of people that badges can be assigned
  to can come from an existing LDAP data store. OpenIoT tracks the assignment of devices to assets over time
  and ties events to the assignment so at a later date you can query 'what were the locations of the badge
  when it was assigned to this person'.
- Integrates with third party integration frameworks such as `Mule ESB <http://http://www.mulesoft.com/>`_,
  allowing event data to trigger complex interactions such as adding data to Salesforce or notifying
  alert conditions using text messages generated by Twilio.
- Provides an HTML5 administrative application that allows all of the system data to be viewed and manipulated
  in a way that makes it easy to understand the data. The admin app uses REST services provided by
  the core platform to interact with the data. Third party applications can use the same REST services 
  to interact with OpenIoT data without having to use the admin application.
- Offers a Java client that can interact with most of the provided REST services. For external systems
  with existing Java code, interfacing with OpenIoT is as simple as a few lines of code.
- Protects information by limiting access to data based on a proven user management system. The system 
  can be configured to use external sources of identity data such as LDAP data stores.
- Generates detailed analytics information from gathered device data and provides factilities for
  executing advanced faceted queries on the data.

--------------------------
Core Platform Technologies
--------------------------
Rather than reinventing the wheel, OpenIoT depends on many supporting open source technologies to
accomplish its goals. Most of the technologies used have been tested for years in production environments
and have been continuously upgraded thanks to many iterations of improvements. The following open
source components are used by OpenIoT:

:Apache Tomcat 7: 
	`Tomcat <http://tomcat.apache.org/>`_ provides the core server in which OpenIoT runs. OpenIoT is
	deployed as a web archive (WAR file) that runs when the Tomcat server is started.
:Spring Framework: 
	`Spring <http://spring.io/>`_ delivers the core configuration framework that bootstraps OpenIoT and
	allows it to be configured and extended. Rather than using a hard-coded set of components, OpenIoT has
	a core set of service provider interfaces and default implementations of the interfaces. By using the same
	interfaces in custom classes and plugging them in via Spring, a third parties can extend OpenIoT without
	touching the core code.
:Spring Security:
	`Spring Security <http://projects.spring.io/spring-security/>`_ provides the core security infrastructure
	for OpenIoT. OpenIoT has its own user management interfaces, but also implements interfaces from
	Spring Security, allowing it to use existing security components for authenticating access to system 
	resources. For instance, Spring Security annotations are used to control who can access the REST services.
:MongoDB:
	`MongoDB <http://www.mongodb.org/>`_ is a NoSQL database that can be used to store OpenIoT data. It is
	very quick and easy to install, has great performance, and does not require the computing resources of HBase. 
	MongoDB is a great choice for smaller OpenIoT installations where extreme scalability it not required.
:Apache HBase:
	`HBase <https://hbase.apache.org/>`_ is a distributed, non-relational data store that allows relatively unlimited
	data storage with near linear scalability as new hardware is added to the cluster. OpenIoT uses a customized
	HBase schema to store device events as `time series data <http://en.wikipedia.org/wiki/Time_series_database>`_ 
	that is optimally distributed across a cluster, allowing fast access to events based on the time they were gathered.
	This allows OpenIoT to store device event data without ever needing to delete it to preserve performance.
:Apache Solr:
	`Solr <https://lucene.apache.org/solr/>`_ is an advanced distributed search engine powered by Apache Lucene.
	OpenIoT uses Solr to index device event data for advanced queries. Since OpenIoT differentiates between
	different types of event data, it can index the data in Solr based on interesting characteristics. For instance,
	OpenIoT indexes location data with geospatial indexes. OpenIoT also adds extra metadata for each event so that
	complex faceted searches can be performed. For instance, a query could be 'for all location events gathered in the
	last week, find those within a mile of a given point, then get a count by device hardware type' or 'return a list
	of devices attached to a given type of heavy equipment that had an engine temperature reading of greater than a
	given value in the time period of noon to 3pm'.
:Hazelcast:
	`Hazelcast <http://www.hazelcast.com/>`_ is an in-memory data grid that allows for high performance data processing
	across a cluster of servers. OpenIoT uses Hazelcast to provide subscription-based access to events being
	processed. An external entity can use the Hazelcast client to connect to a running OpenIoT instance and
	listen to a feed of events including location data, measurements, alerts, and command invocations.

------------------------
Integration Technologies
------------------------
In addition to the technologies used to implement core OpenIoT features, there are a number of
complementary technologies that enhance OpenIoT. These include:

:Mule ESB/Studio:
	`Mule ESB <http://http://www.mulesoft.com/>`_ is an integration platform that provides access to almost any
	communication protocol or cloud technology you can imagine. For instance, using Mule you could read messages
	from a folder on the file system, parse them, then deliver them to OpenIoT via REST services. On the other
	side of the coin, you could have Mule respond to events after the fact. For example, if an alert event of a 
	given type and severity is detected, Mule can interface with Twilio and send out an SMS message to alert the 
	responsible party to respond. `Mule Studio <http://www.mulesoft.com/platform/mule-studio>`_ is a powerful IDE
	that allows mule flows to be designed graphically. OpenIoT has a plugin for Mule Studio that allows flows to
	subscribe to device events using a drag-and-drop visual approach.

:Magento:
	`Magento Community Edition <http://magento.com/>`_ is an open source storefront product that allows you
	to easily set up an online store complete with a very sophisticated product catalog. OpenIoT uses an extension
	module to allow Magento products to serve as asset types that can be assigned to devices. Magento has an 
	extensive user interface for adding custom product attributes including images. These can flow through as asset
	attributes and be used in device event processing. For instance, if a product has a price attribute, you could
	add rules in Mule processing that query the attribute at runtime and fire a custom alert if a device over a 
	given value moves out of a pre-determined area.
	
:WSO2 Identity Server:
	`WSO2 Identity Server <http://wso2.com/products/identity-server/>`_ is an identity management solution that
	allows user information to be accessed from a number of different storage providers using the SCIM protocol.
	This allows OpenIoT's asset management framework to use a single API to access user information stored in
	databases, LDAP stores, or any other supported format. The person assets may then be assigned to devices so 
	that OpenIoT has more context in reacting to events. For instance, if an alert condition occurs, OpenIoT
	can originate an automated call to the cell phone registered to the user assigned to a device.

-------------------
Leveraging Big Data
-------------------
The core purpose of OpenIoT is to choreograph interactions between devices and various external entities, but
an important byproduct of the management process is data.. lots of data. Consider an application that tracks the 
current locations of cars in a rental car fleet. Suppose that the tracking device sends a location event back to 
OpenIoT every 10 seconds. In one day, the car will have reported 8640 location events. Multiply that by 10000
cars in a fleet and the number of events approaches 87 million per day. Lower the monitoring interval to per-second 
accuracy and the number of events moves toward a billion. In the 'Internet of Things', the number
of events generated can quickly reach levels that would break your average database. OpenIoT was designed with
huge data in mind and is intended to scale gracefully without performance degrading.

-------------------
Potential Use Cases
-------------------
The possible uses for OpenIoT are endless. Almost any industry can benefit from some level of monitoring, automation,
and analytics. Below are a few examples of real-world uses for OpenIoT:

:Vehicle Tracking:
	Whether monitoring a rental car fleet or a few very expensive pieces of heavy equipment, it makes sense to track 
	the location of vehicles and monitor their condition over time. An automated system based on OpenIoT could help
	in theft prevention, monitor service intervals or point out trends in maintenance costs based on vehicle type.

:Home Automation:
	Home automation is one of the fastest growing areas in IoT. Many devices that were once passive now
	contain microcontrollers and have the ability to be monitored or actuated externally. OpenIoT provides a
	central system for extended retention of measurements from devices and facilitates sending commands in response 
	to various conditions. Many off-the-shelf systems are customizable, but OpenIoT is truly programmable. An
	example of the power of OpenIoT in the cloud is a climate control system. A system could be designed to learn
	wake/sleep patterns and temperature preferences. Since OpenIoT can operate in the cloud, your climate profile
	could follow you when you check into a hotel, so that the room is already confortable when you check in and 
	adjusts itself on your schedule.

:Medical:
	The medical industry is full of opportunities for monitoring, automation, and analytics. For instance, monitors
	attached to patients could gather a patient's vital signs on a short interval, storing them in OpenIoT. Doctors
	could use the stored data to look for signs of abnormal readings. Better yet, OpenIoT analytics could automatically
	analyze the data and look for outlying data, even cross-referencing data between patients to draw more global
	conclusions. Data from local hospital OpenIoT instances could be aggregated with data from other hospitals to
	create larger study groups, revealing otherwise hidden trends.
